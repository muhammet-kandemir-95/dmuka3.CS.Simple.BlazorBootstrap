<div class="row mb-sm-2 mb-2">
    <div class="col-md-6 pl-4 text-left">
        <label>
            @this.Model.RowCountLabel
        </label>
        <select class="browser-default custom-select" style="width:auto;" @onchange="(async e =>
                                                                                     {
                                                                                         this.Model.PageIndex = 0;
                                                                                         this.Model.RowCount = Convert.ToInt32(e.Value);
                                                                                         await this.RefreshAsync();
                                                                                     })">
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="50">50</option>
            <option value="100">100</option>
        </select>
    </div>
    @if (this.Model.SearchEnable)
    {
        <div class="col-md-6 pr-4 text-right">
            <label>
                @this.Model.SearchLabel
            </label>
            <input class="browser-default custom-input" style="width:auto;" @onchange="(async e =>
                                                                                   {
                                                                                       this.Model.SearchValue = (string)e.Value;
                                                                                       this.Model.PageIndex = 0;
                                                                                       await this.RefreshAsync();
                                                                                   })" />
        </div>
    }
</div>

<div class="row">
    <div class="col-md-12" style="max-width:100%;overflow:auto;">
        <table id="@("dmuka3-table-" + this.tableId)" class="table @this.Class" @attributes="this.Attributes" data-unique-key="@this.Model.UniqueKey" style="margin-bottom:0px;">
            <thead>
                <tr>
                    @foreach (var column in this.Model.Columns)
                    {
                        <th @onclick="@(async e => { await clickColumn(column); })">
                            @column.Description @(column.SortType == Dmuka3TableModel.SortType.Asc ? "▲" : column.SortType == Dmuka3TableModel.SortType.Desc ? "▼" : "")
                        </th>
                    }
                </tr>
            </thead>
            <tbody>
            </tbody>
            <tfoot>
            </tfoot>
        </table>
    </div>
</div>

<div class="row">
    <div class="col-md-3 text-left text-nowrap pl-4 mb-sm-2">
        <b>@(this.Model.PageIndex * this.Model.RowCount + 1) - @((this.Model.PageIndex + 1) * this.Model.RowCount)</b> / @(this.Model.TotalRowCount)
    </div>
    <div class="col-lg-5 col-md-9 text-right pr-4">
        @if (this.Model.PreviousPageEnable)
        {
            <button class="btn btn-primary" @onclick="(async e => { this.Model.PageIndex--; await this.RefreshAsync(); })">&#8249;</button>
        }

        @if (this.Model.GoFirstPageEnable)
        {
            <button class="btn btn-info" @onclick="(async e => { this.Model.PageIndex = 0; await this.RefreshAsync(); })">1</button>
        }

        @for (int i = this.Model.PageStart; i <= this.Model.PageEnd; i++)
        {
            var cloneI = i;
            @if (cloneI < 0 || cloneI > this.Model.MaxPageIndex)
                continue;

            @if (cloneI == this.Model.PageIndex)
            {
                <button class="btn btn-primary" @onclick="(async e => { this.Model.PageIndex = cloneI; await this.RefreshAsync(); })">@(cloneI + 1)</button>
            }
            else
            {
                <button class="btn btn-secondary" @onclick="(async e => { this.Model.PageIndex = cloneI; await this.RefreshAsync(); })">@(cloneI + 1)</button>
            }
        }

        @if (this.Model.GoLastPageEnable)
        {
            <button class="btn btn-info" @onclick="(async e => { this.Model.PageIndex = this.Model.MaxPageIndex; await this.RefreshAsync(); })">@(this.Model.MaxPageIndex + 1)</button>
        }

        @if (this.Model.NextPageEnable)
        {
            <button class="btn btn-primary" @onclick="(async e => { this.Model.PageIndex++; await this.RefreshAsync(); })">&#8250;</button>
        }
    </div>
</div>

<table style="display:none">
    <tbody id="@("dmuka3-table-clone-" + this.tableId)">
        @ChildContent
    </tbody>
</table>